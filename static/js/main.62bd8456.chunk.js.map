{"version":3,"sources":["App.js","index.js"],"names":["provider","signer","pluto","undefined","window","ethereum","enable","then","ethers","providers","Web3Provider","getSigner","Contract","Pluto","abi","App","useState","connection","setConnection","totalContribution","setTotalContribution","chainID","setChainId","allowBuy","setAllowBuy","presalesStart","setPresalesStart","presalesEnd","setPresalesEnd","beneficiary","setBeneficiary","contribution","setContribution","valBeneficiary","setValBeneficiary","valContribution","setValContribution","buyButtonLoading","setBuyButtonLoading","address","setAddress","txnLink","setTxnLink","txnHash","setTxnHash","tokensAmount","setTokenAmounts","useEffect","init","setInterval","a","getNetwork","_chainID","getAddress","_address","getTokens","_tokensAmount","div","weiRaised","_totalContribution","utils","formatEther","getPresalesStarted","_presalesStart","getPresalesEnded","_presalesEnd","_allowBuy","toString","clearInterval","buyPresalesTokens","e","preventDefault","gasLimit","value","tx","wait","txLink","hash","className","Message","hidden","error","header","content","info","Form","Field","Input","onChange","_beneficiary","target","valid","isAddress","placeholder","_contribution","parseEther","label","labelPosition","Button","primary","disabled","loading","onClick","href","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"ommoDAUIA,EAAUC,EAAQC,E,uKAEEC,IAApBC,OAAOC,UACTL,OAAWG,EACXF,OAASE,EACTD,OAAQC,IAERC,OAAOC,SAASC,SAASC,KAAKP,EAAW,IAAIQ,IAAOC,UAAUC,aAAaN,OAAOC,SAAU,QAC5FJ,EAASD,EAASW,YAElBT,EAAQ,IAAIU,IACV,6CACAC,EAAMC,IACNb,IAgKWc,MA3Jf,WAAgB,IAAD,EACuBC,oBAAS,GADhC,mBACNC,EADM,KACMC,EADN,OAEqCF,mBAAS,GAF9C,mBAENG,EAFM,KAEaC,EAFb,OAGiBJ,wBAASb,GAH1B,mBAGNkB,EAHM,KAGGC,EAHH,OAImBN,oBAAS,GAJ5B,mBAINO,EAJM,KAIIC,EAJJ,OAK6BR,oBAAS,GALtC,mBAKNS,EALM,KAKSC,EALT,OAMyBV,oBAAS,GANlC,mBAMNW,EANM,KAMOC,EANP,OAQyBZ,wBAASb,GARlC,mBAQN0B,EARM,KAQOC,EARP,OAS2Bd,mBAAS,GATpC,mBASNe,EATM,KASQC,EATR,OAU+BhB,oBAAS,GAVxC,mBAUNiB,EAVM,KAUUC,EAVV,OAWiClB,oBAAS,GAX1C,mBAWNmB,EAXM,KAWWC,EAXX,OAamCpB,oBAAS,GAb5C,oBAaNqB,GAbM,MAaYC,GAbZ,SAeiBtB,wBAASb,GAf1B,qBAeNoC,GAfM,MAeGC,GAfH,SAgBiBxB,wBAASb,GAhB1B,qBAgBNsC,GAhBM,MAgBGC,GAhBH,SAiBiB1B,wBAASb,GAjB1B,qBAiBNwC,GAjBM,MAiBGC,GAjBH,SAkB2B5B,mBAAS,GAlBpC,qBAkBN6B,GAlBM,MAkBQC,GAlBR,MAoBbC,qBAAU,WACR,IAAMC,EAAOC,YAAW,sBAAC,wCAAAC,EAAA,8DACN/C,IAAbH,EADmB,iCAEGA,EAASmD,aAFZ,UAGJ,MADXC,EAFe,iBAGe,KAAbA,EAHF,wBAInBlC,GAAc,GAJK,SAKIjB,EAAOoD,aALX,cAKbC,EALa,iBAOOpD,EAAMqD,UAAUD,GAPvB,eAQnBE,GADIA,EAPe,QAQWC,IAAI,KARf,UAUYvD,EAAMwD,YAVlB,eAUfC,EAVe,OAWnBA,EAAqBC,QAAMC,YAAYF,GAXpB,UAaUzD,EAAM4D,qBAbhB,eAabC,EAba,iBAcQ7D,EAAM8D,mBAdd,QAcbC,EAda,OAgBbC,EAAYH,IAAmBE,EAErCnB,GAAgBU,EAAcW,YAC9B/C,EAAqBuC,GACrBnB,GAAWc,GACXhC,EAAW8B,GACX1B,EAAiBqC,GACjBnC,EAAeqC,GACfzC,EAAY0C,GAxBO,wBA0BnBhD,GAAc,GA1BK,gCA6BrBA,GAAc,GA7BO,4CA+BtB,KACH,OAAO,kBAAMkD,cAAcpB,MAC1B,IAEH,IAAMqB,GAAiB,uCAAG,WAAOC,GAAP,mBAAApB,EAAA,6DACxBoB,EAAEC,iBACFjC,IAAoB,GAFI,SAGPpC,EAAMmE,kBAAkBxC,EAAa,CAAC2C,SAAU,IAAQC,MAAO1C,IAHxD,cAGlB2C,EAHkB,gBAIlBA,EAAGC,OAJe,uBAKEzE,EAAMqD,UAAUhB,IALlB,OAMxBiB,GADIA,EALoB,QAMMC,IAAI,KAGlB,KAAZpC,EACFuD,EAAS,kCAAoCF,EAAGG,KAC3B,KAAZxD,IACTuD,EAAS,0BAA4BF,EAAGG,MAE1C/B,GAAgBU,EAAcW,YAC9BvB,GAAW8B,EAAGG,MACdnC,GAAWkC,GACXtC,IAAoB,GAjBI,4CAAH,sDAuDvB,OACE,sBAAKwC,UAAU,MAAf,UACE,0CACA,uBAEA,cAACC,EAAA,EAAD,CAASC,OAAQ/D,EAAYgE,OAAQhE,EAAYiE,OAAO,QAAQC,QAAS,4CAEzE,cAACJ,EAAA,EAAD,CAASK,MAAI,EAACJ,OAAQvD,EAAeyD,OAAO,iCAC5C,cAACH,EAAA,EAAD,CAASK,MAAI,EAACJ,QAASrD,EAAauD,OAAO,+BAC3C,cAACH,EAAA,EAAD,CAASG,OAAQ,6BAA8BC,QAAShE,EAAoB,SAE5E,cAACkE,EAAA,EAAD,UACE,eAACA,EAAA,EAAKC,MAAN,WACI,wDACA,cAACC,EAAA,EAAD,CACIC,SAlDY,SAAClB,GACzB,IAAImB,EAAenB,EAAEoB,OAAOjB,MACtBkB,EAAQ/B,QAAMgC,UAAUH,GAC9B,IACME,GACFF,EAAe7B,QAAMP,WAAWoC,GAChCvD,GAAkB,GAClBJ,EAAe2D,KAEfvD,GAAkB,GAClBJ,EAAe,IAEjB,SACAI,GAAkB,GAClBJ,EAAe,KAqCL+D,YAAY,8BAGhB,yDACA,cAACN,EAAA,EAAD,CACEC,SAtCe,SAAClB,GAC1B,IAAIwB,EAAgBxB,EAAEoB,OAAOjB,MAC7B,IACE,GAAIqB,GAAiB,GAAKA,EAAgB,GACxC1D,GAAmB,GACnBJ,EAAgB,OACX,CACL,IAAMD,EAAe6B,QAAMmC,WAAWzB,EAAEoB,OAAOjB,OAC/CrC,GAAmB,GACnBJ,EAAgBD,IAElB,SACAK,GAAmB,GACnBJ,EAAgB,KA0BR6D,YAAY,eACZG,MAAM,MACNC,cAAc,UAEhB,cAACC,EAAA,EAAD,CAAQC,SAAO,EAACC,UAAYjE,IAAoBF,IAAmBV,IAAaN,EAAaoF,QAAShE,GAAkBiE,QAASjC,GAAjI,8BAMN,qDACsBxB,MAGtB,oDACoB,mBAAG0D,KAAM9D,GAAT,SAAmBE,IAAqB,aC3KlE6D,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.62bd8456.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\nimport { ethers, Contract , utils} from 'ethers';\nimport { Form, Input, Message, Button } from 'semantic-ui-react';\nimport Pluto from './contracts/Pluto.json';\nimport 'semantic-ui-css/semantic.min.css'\n\n// if use this, it does not connect to metamask after build\n//const provider = new ethers.providers.Web3Provider(window.ethereum);\n\n// https://stackoverflow.com/questions/60785630/how-to-connect-ethers-js-with-metamask\nlet provider, signer, pluto;\n\nif (window.ethereum === undefined) {\n  provider = undefined;\n  signer = undefined;\n  pluto = undefined;\n} else {\n  window.ethereum.enable().then(provider = new ethers.providers.Web3Provider(window.ethereum, \"any\"));\n  signer = provider.getSigner();\n\n  pluto = new Contract(\n    \"0xB22dee4B962303D42b4fC04B0eEc7429CE512239\",\n    Pluto.abi,\n    signer\n  );\n}\n\n\nfunction App() {\n  const [connection, setConnection] = useState(false);\n  const [totalContribution, setTotalContribution] = useState(0);\n  const [chainID, setChainId] = useState(undefined);\n  const [allowBuy, setAllowBuy] = useState(false);\n  const [presalesStart, setPresalesStart] = useState(false);\n  const [presalesEnd, setPresalesEnd] = useState(false);\n\n  const [beneficiary, setBeneficiary] = useState(undefined);\n  const [contribution, setContribution] = useState(0);\n  const [valBeneficiary, setValBeneficiary] = useState(false);\n  const [valContribution, setValContribution] = useState(false);\n\n  const [buyButtonLoading, setBuyButtonLoading] = useState(false);\n\n  const [address, setAddress] = useState(undefined);\n  const [txnLink, setTxnLink] = useState(undefined);\n  const [txnHash, setTxnHash] = useState(undefined);\n  const [tokensAmount, setTokenAmounts] = useState(0);\n\n  useEffect(() => {\n    const init = setInterval(async () => {\n      if (provider !== undefined) {\n        const _chainID = (await provider.getNetwork())[\"chainId\"];\n        if (_chainID === 97 || _chainID === 56){\n          setConnection(true);\n          const _address = await signer.getAddress();\n\n          let _tokensAmount = await pluto.getTokens(_address);\n          _tokensAmount = _tokensAmount.div(1000000000);\n\n          let _totalContribution = await pluto.weiRaised();\n          _totalContribution = utils.formatEther(_totalContribution);\n\n          const _presalesStart = await pluto.getPresalesStarted();\n          const _presalesEnd = await pluto.getPresalesEnded();\n\n          const _allowBuy = _presalesStart && !_presalesEnd;\n\n          setTokenAmounts(_tokensAmount.toString());\n          setTotalContribution(_totalContribution);\n          setAddress(_address);\n          setChainId(_chainID);\n          setPresalesStart(_presalesStart);\n          setPresalesEnd(_presalesEnd);\n          setAllowBuy(_allowBuy);\n        } else {\n          setConnection(false);\n        }\n      } else {\n        setConnection(false);\n      }\n    }, 1000);\n    return () => clearInterval(init);\n  }, []);\n\n  const buyPresalesTokens = async (e) => {\n    e.preventDefault();\n    setBuyButtonLoading(true);\n    const tx = await pluto.buyPresalesTokens(beneficiary, {gasLimit: 500000, value: contribution});\n    await tx.wait();\n    let _tokensAmount = await pluto.getTokens(address);\n    _tokensAmount = _tokensAmount.div(1000000000);\n\n    let txLink;\n    if (chainID === 97) {\n      txLink = \"https://testnet.bscscan.com/tx/\" + tx.hash;\n    } else if (chainID === 56) {\n      txLink = \"https://bscscan.com/tx/\" + tx.hash;\n    };\n    setTokenAmounts(_tokensAmount.toString());\n    setTxnHash(tx.hash);\n    setTxnLink(txLink);\n    setBuyButtonLoading(false);\n  }\n\n  const handleBeneficiary = (e) => {\n    let _beneficiary = e.target.value;\n    const valid = utils.isAddress(_beneficiary);\n    try {\n      if (valid) {\n        _beneficiary = utils.getAddress(_beneficiary);\n        setValBeneficiary(true);\n        setBeneficiary(_beneficiary);\n      } else {\n        setValBeneficiary(false);\n        setBeneficiary(0);\n      }\n    } catch {\n      setValBeneficiary(false);\n      setBeneficiary(0);\n    }\n  }\n\n  const handleContribution = (e) => {\n    let _contribution = e.target.value;\n    try {\n      if (_contribution <= 0 || _contribution > 0.5) {\n        setValContribution(false);\n        setContribution(0);\n      } else {\n        const contribution = utils.parseEther(e.target.value);\n        setValContribution(true);\n        setContribution(contribution);\n      }\n    } catch {\n      setValContribution(false);\n      setContribution(0)\n    }\n  }\n  \n  return (\n    <div className=\"App\">\n      <h1>Presales</h1>\n      <br></br>\n\n      <Message hidden={connection} error={!connection} header=\"Opps!\" content={\"Please connect to BSC through Metamask!\"} />\n\n      <Message info hidden={presalesStart} header=\"Presales has not started yet\" />\n      <Message info hidden={!presalesEnd} header=\"Presales has already ended\" />\n      <Message header={\"Current Total Contribution\"} content={totalContribution + \" BNB\"} />\n \n      <Form>\n        <Form.Field>\n            <label>Beneficiary Address</label>\n            <Input\n                onChange={handleBeneficiary}\n                placeholder=\"Enter a valid BNB address\"\n            />\n\n            <label>Amount to Contribute</label>\n            <Input\n              onChange={handleContribution}\n              placeholder=\"MAX: 0.5 BNB\"\n              label=\"BNB\"\n              labelPosition=\"right\"\n            />\n            <Button primary disabled={(!valContribution || !valBeneficiary || !allowBuy || !connection)} loading={buyButtonLoading} onClick={buyPresalesTokens}>\n              Buy Tokens!\n            </Button>\n        </Form.Field>\n      </Form>\n\n      <h3>\n        Tokens you bought: {tokensAmount}\n      </h3>\n\n      <h3>\n        Transaction hash: <a href={txnLink}>{txnHash ?  txnHash : \" \"}</a>\n      </h3>\n\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}